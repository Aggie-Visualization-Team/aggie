
<form>
  <div class="table-filters">
    <div class="filter search">
      <div class="input-group">
        <span class="input-group-addon">
          <i class="fa fa-search"></i>
        </span>
        <input type="text" ng-model="trend.keywords" class="form-control" placeholder="Enter keywords">
        <a href class="input-group-addon" ng-click="clearSearch()" ng-show="trend.keywords">Ã—</a>
      </div>
    </div>
    <div class="filter source-type-filter">
      <select ng-model="trend.sourceType" ng-options="type as type | translate for type in sourceTypes" ng-change="search()" class="form-control">
        <option value="">Source Type</option>
      </select>
    </div>
    <div class="filter source-type-filter">
      <select ng-model="trend.sourceId" ng-options="value._id as value.nickname for value in sources" ng-change="search()" class="form-control">
        <option value="">Source</option>
      </select>
    </div>
    <div class="filter source-type-filter">
      <select ng-model="trend.incidentId" ng-options="value._id as value.title for value in incidents" ng-change="search()" class="form-control">
        <option value="">Incident</option>
      </select>
    </div>
    <div class="filter">
    </div>
  </div>
</form>

<div class="table-actions">
  <button class="btn btn-info" ng-click="createTrend(trend)">Create Trend</button>
</div>

<p ng-hide="trends.length > 0 ">Sorry, but we couldn't find any results.</p>

<table aggie-table ng-show="trends.length > 0">
  <thead>
    <tr>
      <th>Query</th>
      <th>Created</th>
      <th>Last Enabled</th>
      <th>Count</th>
      <th>Enabled</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="t in trends">
      <td class="compact content">{{ t._query }}</td>
      <td class="compact content">{{ t.createdAt | human }} ago</td>
      <td class="compact content">{{ t.lastEnabledAt | human }} ago</td>
      <td class="compact content text-center">
        <aggie-sparkline data="{{t.displayCounts}}" callback="showReport(sparkEvent, t)">
        </aggie-sparkline>
      </td>
      <td class="compact text-center status">
        <aggie-toggle toggle="t.enabled" options="{ true: 'On', false: 'Off' }" on-change="toggleEnabled(t)">
      </td>
      <td class="compact text-center middle">
        <a href class="btn btn-info" aggie-confirm="Are you sure you want to delete this trend?" on-confirm="deleteTrend(t)">Delete</a>
      </td>
    </tr>
  </tbody>
</table>
