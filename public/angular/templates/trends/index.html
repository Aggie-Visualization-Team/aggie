<div class="table-actions">
    <button ng-controller="TrendFormModalController" class="btn btn-info" ng-click="create()">Create new trend</a>
</div>

<p ng-hide="trends.length > 0 ">Sorry, but we couldn't find any results.</p>

<table aggie-table ng-show="trends.length > 0">
  <thead>
    <tr>
      <th>Query</th>
      <th>Created</th>
      <th>Last Enabled</th>
      <th>Reports</th>
      <th>Enabled</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="t in trends | orderBy:'-lastEnabledAt'" ng-class="trendClass(t)">
      <td class="compact content">
        <div ng-repeat="(key, value) in parseKeywords(t)">{{key | translate}}: {{value | translate}}</div>
      </td>
      <td class="compact content">{{ t.createdAt | human }} ago</td>
      <td class="compact content">{{ t.lastEnabledAt | human }} ago</td>
      <td class="content expand">
        <aggie-sparkline data="{{t.displayCounts}}" callback="showReport(sparkEvent, t)"></aggie-sparkline>
      </td>
      <td class="compact text-center status">
        <aggie-toggle toggle="t.enabled" options="{ true: 'On', false: 'Off' }" on-change="toggleEnabled(t)">
      </td>
      <td class="compact text-center middle">
        <button type="button" href class="btn btn-info" aggie-confirm="Are you sure you want to delete this trend? (All historical data will be lost)" on-confirm="deleteTrend(t)">Delete</button>
      </td>
    </tr>
  </tbody>
</table>
